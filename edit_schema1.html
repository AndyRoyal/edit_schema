<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="viewport" content="width=device-width, initial-scale=1" />
<title>edit-schema</title>
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="andy" />
<!-- <script type="text/javascript" src="http://js.gomein.net.cn/gmlib/jq/1.7.1/jquery.js"></script> -->
<link rel="stylesheet" href="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<style type="text/css">
  .edit-area {
      background: #999;
      filter: alpha(opacity=80);
      opacity: .5;
      width: 100%;
      height: 100%;
      position: absolute;
      top: 0;
      left: 0;
      z-index: 100;
      display: block;
      border: 2px dashed #000;
    }

    #savebtn{
      position: absolute;
      z-index: 101;
      top:10px;
      right: 10px;
      width: 70px;
      height: 33px;
      background:#ccc;
      color: #000;
      text-align: center;
      line-height: 27px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 5px;
    }
    #editbtn{
      position: absolute;
      z-index: 101;
      right: 10px;
      top: 10px;
      width: 50px;
      font-size: 14px;
      padding: 0;
      height: 30px;
    }
    .fl{
      float: left;
    }

    .di{
      display: inline-block;
    }
    .line{
      line-height: 50px;
    }
</style>
<body>
     <div class="container" style="padding: 100px 50px 10px;" >
      <div  class=" edit-schema   jumbotron" title=""  
          data-container="body" data-toggle="popover" data-placement="top" 
          data-content="">
         1
      </div>
      <div  class="edit-schema jumbotron" title="1111" 
          data-container="body" data-toggle="popover" data-placement="top" 
          data-content="">
       2
      </div>
      <div  class="edit-schema jumbotron" title="1111"  
          data-container="body" data-toggle="popover" data-placement="top" 
          data-content="">
        3
      </div>
      <div  class="edit-schema" style="width:200px;height:200px;border:1px solid #ccc" title="1111"  
          data-toggle="popover" data-placement="top" 
          data-content="">
        4
      </div>
    </div>
    <script>
    $(function () { 
        var aim = $("[data-toggle='popover']");//约定属性
        var editArea = $('<div class = "edit-area"></div>');//蒙层
        var $tip = $("<textarea class='testTip' id='testTip'  rows=10 cols=37></textarea>");//存放DOM
        //var DOMS;
        var editbtn = $('<button id="editbtn" class="btn btn-primary btn-lg " data-toggle="modal" data-target="#myModal">编辑</button>');
        var savebtn = $('<p id="savebtn">保存修改</p>');
        var $editNodes = $(".edit-schema");
        var $sele =$(".sele");

        aim.hover(function(){
          im = $(this);
          //DOMS = $(this).outerHTML();
          im.css({
            'position':"relative"
          });
          $editNodes.removeClass('edit-layout');
          $(this).addClass('edit-layout');//
          im.append(editbtn);
          im.append(editArea);      
        });

        //弹出层添加属性  没做关闭清除属性操作
        //if($("#myModal")){
          
          //“提交更改” 保存属性值到DOM节点
          $("#save-edit").on("click",function(){
              var im = $(".edit-layout");
              im.attr("x",$sele.val());
              im.attr("y",$sele.val());
          });

          //下拉列表值change
          $sele.change(function(){
              var im = $(".edit-layout")
              im.attr("x",$sele.val());
          });
        //}
    });

    </script>

  


<!-- 模态框（Modal） -->
<div class="  modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
          &times;
        </button>
        <h4 class="modal-title" id="myModalLabel">
            属性 && 模板
        </h4>
      </div>
      <div class="modal-body">
          <form class="form-horizontal" role="form">
            <div class="form-group form-group-lg">
              <label class="col-sm-3 control-label" for="formGroupInputLarge">添加属性:</label>
              <div class="col-sm-2 control-label">
               <select class="sele">
                    <option>data1=1</option>
                    <option>data2=2</option>
                    <option>data3=3</option>
                  </select>
              </div>
            </div>
            <div class="form-group form-group-lg">
              <label class="col-sm-3 control-label" for="formGroupInputLarge">选择模板:</label>
              <div class="col-sm-2 control-label">
                <select class="sele">
                  <option>模板1</option>
                  <option>模板2</option>
                  <option>模板3</option>
                </select>
              </div>
            </div>
          </form>
    </div>


      <div class="modal-footer">
        <button id="save-edit" type="button" class="btn btn-default" data-dismiss="modal">保存并关闭
        </button>
      </div>
    </div><!-- /.modal-content -->
  </div><!-- /.modal -->
</div>
</body>
</html>